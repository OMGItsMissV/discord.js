{"version":3,"sources":["../../src/Structures/PMChannel.js"],"names":["PMChannel","constructor","data","client","type","lastMessageID","last_message_id","messages","options","maxCachedMessages","hasOwnProperty","recipients","forEach","recipient","add","internal","users","name","undefined","owner","get","owner_id","icon","lastMessage","toString","toObject","keys","obj","k","sendMessage","apply","arguments","send","sendTTSMessage","sendTTS","sendFile","startTyping","stopTyping","getLogs","getChannelLogs","getMessage"],"mappings":"AAAA;;;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEe,MAAMA,SAAN,2BAAgC;AAC7CC,cAAYC,IAAZ,EAAkBC,MAAlB,EAA0B;AACxB,UAAMD,IAAN,EAAYC,MAAZ;;AAEA,SAAKC,IAAL,GAAYF,KAAKE,IAAjB;AACA,SAAKC,aAAL,GAAqBH,KAAKI,eAAL,IAAwBJ,KAAKG,aAAlD;AACA,SAAKE,QAAL,GAAgB,oBAAU,IAAV,EAAgBJ,OAAOK,OAAP,CAAeC,iBAA/B,CAAhB;AACA,QAAIP,KAAKQ,cAAL,CAAoB,YAApB,CAAJ,EAAuC;AACrC,UAAIR,KAAKS,UAAL,2BAAJ,EAAsC;AACpC,aAAKA,UAAL,GAAkBT,KAAKS,UAAvB;AACD,OAFD,MAEO;AACL,aAAKA,UAAL,GAAkB,qBAAlB;AACAT,aAAKS,UAAL,CAAgBC,OAAhB,CAAyBC,SAAD,IAAe;AACrC,eAAKF,UAAL,CAAgBG,GAAhB,CAAoB,KAAKX,MAAL,CAAYY,QAAZ,CAAqBC,KAArB,CAA2BF,GAA3B,CAA+B,mBAASD,SAAT,EAAoB,KAAKV,MAAzB,CAA/B,CAApB;AACD,SAFD;AAGD;AACF,KATD,MASO,IAAID,KAAKQ,cAAL,CAAoB,WAApB,CAAJ,EAAsC;AAC3C,WAAKC,UAAL,GAAkB,qBAAlB;AACA,WAAKA,UAAL,CAAgBG,GAAhB,CAAoB,KAAKX,MAAL,CAAYY,QAAZ,CAAqBC,KAArB,CAA2BF,GAA3B,CAA+B,mBAASZ,KAAKW,SAAd,EAAyB,KAAKV,MAA9B,CAA/B,CAApB;AACD;AACD,SAAKc,IAAL,GAAYf,KAAKe,IAAL,KAAcC,SAAd,GAA0BhB,KAAKe,IAA/B,GAAsC,KAAKA,IAAvD;AACA,SAAKE,KAAL,GAAajB,KAAKiB,KAAL,IAAc,KAAKhB,MAAL,CAAYY,QAAZ,CAAqBC,KAArB,CAA2BI,GAA3B,CAA+B,IAA/B,EAAqClB,KAAKmB,QAA1C,CAA3B;AACA,SAAKC,IAAL,GAAYpB,KAAKoB,IAAL,KAAcJ,SAAd,GAA0BhB,KAAKoB,IAA/B,GAAsC,KAAKA,IAAvD;AACD;;AAED,MAAIT,SAAJ,GAAgB;AACd,WAAO,KAAKF,UAAL,CAAgB,CAAhB,CAAP;AACD;;AAED;AACA,MAAIY,WAAJ,GAAkB;AAChB,WAAO,KAAKhB,QAAL,CAAca,GAAd,CAAkB,IAAlB,EAAwB,KAAKf,aAA7B,CAAP;AACD;;AAEDmB,aAAW;AACT,WAAO,KAAKX,SAAL,CAAeW,QAAf,EAAP;AACD;;AAEDC,aAAW;AACT,QAAIC,OAAO,CAAC,MAAD,EAAS,eAAT,EAA0B,WAA1B,CAAX;AAAA,QACEC,MAAM,EADR;;AAGA,SAAK,IAAIC,CAAT,IAAcF,IAAd,EAAoB;AAClBC,UAAIC,CAAJ,IAAS,KAAKA,CAAL,CAAT;AACD;;AAED,WAAOD,GAAP;AACD;;AAEDE,gBAAc;AACZ,WAAO,KAAK1B,MAAL,CAAY0B,WAAZ,CAAwBC,KAAxB,CAA8B,KAAK3B,MAAnC,EAA2C,8BAAI,IAAJ,EAAU4B,SAAV,CAA3C,CAAP;AACD;;AAEDC,SAAO;AACL,WAAO,KAAK7B,MAAL,CAAY0B,WAAZ,CAAwBC,KAAxB,CAA8B,KAAK3B,MAAnC,EAA2C,8BAAI,IAAJ,EAAU4B,SAAV,CAA3C,CAAP;AACD;;AAEDE,mBAAiB;AACf,WAAO,KAAK9B,MAAL,CAAY8B,cAAZ,CAA2BH,KAA3B,CAAiC,KAAK3B,MAAtC,EAA8C,8BAAI,IAAJ,EAAU4B,SAAV,CAA9C,CAAP;AACD;;AAEDG,YAAU;AACR,WAAO,KAAK/B,MAAL,CAAY8B,cAAZ,CAA2BH,KAA3B,CAAiC,KAAK3B,MAAtC,EAA8C,8BAAI,IAAJ,EAAU4B,SAAV,CAA9C,CAAP;AACD;;AAEDI,aAAW;AACT,WAAO,KAAKhC,MAAL,CAAYgC,QAAZ,CAAqBL,KAArB,CAA2B,KAAK3B,MAAhC,EAAwC,8BAAI,IAAJ,EAAU4B,SAAV,CAAxC,CAAP;AACD;;AAEDK,gBAAc;AACZ,WAAO,KAAKjC,MAAL,CAAYiC,WAAZ,CAAwBN,KAAxB,CAA8B,KAAK3B,MAAnC,EAA2C,8BAAI,IAAJ,EAAU4B,SAAV,CAA3C,CAAP;AACD;;AAEDM,eAAa;AACX,WAAO,KAAKlC,MAAL,CAAYkC,UAAZ,CAAuBP,KAAvB,CAA6B,KAAK3B,MAAlC,EAA0C,8BAAI,IAAJ,EAAU4B,SAAV,CAA1C,CAAP;AACD;;AAEDO,YAAU;AACR,WAAO,KAAKnC,MAAL,CAAYoC,cAAZ,CAA2BT,KAA3B,CAAiC,KAAK3B,MAAtC,EAA8C,8BAAI,IAAJ,EAAU4B,SAAV,CAA9C,CAAP;AACD;;AAEDS,eAAa;AACX,WAAO,KAAKrC,MAAL,CAAYqC,UAAZ,CAAuBV,KAAvB,CAA6B,KAAK3B,MAAlC,EAA0C,8BAAI,IAAJ,EAAU4B,SAAV,CAA1C,CAAP;AACD;AAnF4C;kBAA1B/B,S","file":"PMChannel.js","sourcesContent":["\"use strict\";\n\nimport Channel from \"./Channel\";\nimport User from \"./User\";\nimport Cache from \"../Util/Cache\";\nimport {reg} from \"../Util/ArgumentRegulariser\";\n\nexport default class PMChannel extends Channel {\n  constructor(data, client) {\n    super(data, client);\n\n    this.type = data.type;\n    this.lastMessageID = data.last_message_id || data.lastMessageID;\n    this.messages = new Cache(\"id\", client.options.maxCachedMessages);\n    if (data.hasOwnProperty(\"recipients\")) {\n      if (data.recipients instanceof Cache) {\n        this.recipients = data.recipients;\n      } else {\n        this.recipients = new Cache();\n        data.recipients.forEach((recipient) => {\n          this.recipients.add(this.client.internal.users.add(new User(recipient, this.client)));\n        });\n      }\n    } else if (data.hasOwnProperty(\"recipient\")) {\n      this.recipients = new Cache();\n      this.recipients.add(this.client.internal.users.add(new User(data.recipient, this.client)));\n    }\n    this.name = data.name !== undefined ? data.name : this.name;\n    this.owner = data.owner || this.client.internal.users.get(\"id\", data.owner_id);\n    this.icon = data.icon !== undefined ? data.icon : this.icon;\n  }\n\n  get recipient() {\n    return this.recipients[0];\n  }\n\n  /* warning! may return null */\n  get lastMessage() {\n    return this.messages.get(\"id\", this.lastMessageID);\n  }\n\n  toString() {\n    return this.recipient.toString();\n  }\n\n  toObject() {\n    let keys = ['type', 'lastMessageID', 'recipient'],\n      obj = {};\n\n    for (let k of keys) {\n      obj[k] = this[k];\n    }\n\n    return obj;\n  }\n\n  sendMessage() {\n    return this.client.sendMessage.apply(this.client, reg(this, arguments));\n  }\n\n  send() {\n    return this.client.sendMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendTTSMessage() {\n    return this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendTTS() {\n    return this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendFile() {\n    return this.client.sendFile.apply(this.client, reg(this, arguments));\n  }\n\n  startTyping() {\n    return this.client.startTyping.apply(this.client, reg(this, arguments));\n  }\n\n  stopTyping() {\n    return this.client.stopTyping.apply(this.client, reg(this, arguments));\n  }\n\n  getLogs() {\n    return this.client.getChannelLogs.apply(this.client, reg(this, arguments));\n  }\n\n  getMessage() {\n    return this.client.getMessage.apply(this.client, reg(this, arguments));\n  }\n}\n"]}