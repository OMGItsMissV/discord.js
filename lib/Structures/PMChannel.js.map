{"version":3,"sources":["../../src/Structures/PMChannel.js"],"names":["PMChannel","constructor","data","client","console","log","type","lastMessageID","last_message_id","messages","options","maxCachedMessages","recipients","forEach","recipient","add","internal","users","name","undefined","owner","get","owner_id","icon","lastMessage","toString","toObject","keys","obj","k","sendMessage","apply","arguments","send","sendTTSMessage","sendTTS","sendFile","startTyping","stopTyping","getLogs","getChannelLogs","getMessage"],"mappings":"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","file":"PMChannel.js","sourcesContent":["\"use strict\";\n\nimport Channel from \"./Channel\";\nimport User from \"./User\";\nimport Cache from \"../Util/Cache\";\nimport {reg} from \"../Util/ArgumentRegulariser\";\n\nexport default class PMChannel extends Channel {\n  constructor(data, client) {\n    super(data, client);\n\n    console.log(data);\n    this.type = data.type;\n    this.lastMessageID = data.last_message_id || data.lastMessageID;\n    this.messages = new Cache(\"id\", client.options.maxCachedMessages);\n    if (data.recipients) {\n      if (data.recipients instanceof Cache) {\n        this.recipients = data.recipients;\n      } else {\n        this.recipients = new Cache();\n        data.recipients.forEach((recipient) => {\n          this.recipients.add(this.client.internal.users.add(new User(recipient, this.client)));\n        });\n      }\n    } else if (data.recipient) {\n      this.recipients.add(this.client.internal.users.add(new User(data.recipient, this.client)));\n    }\n    this.name = data.name !== undefined ? data.name : this.name;\n    this.owner = data.owner || this.client.internal.users.get(\"id\", data.owner_id);\n    this.icon = data.icon !== undefined ? data.icon : this.icon;\n  }\n\n  get recipient() {\n    return this.recipients[0];\n  }\n\n  /* warning! may return null */\n  get lastMessage() {\n    return this.messages.get(\"id\", this.lastMessageID);\n  }\n\n  toString() {\n    return this.recipient.toString();\n  }\n\n  toObject() {\n    let keys = ['type', 'lastMessageID', 'recipient'],\n      obj = {};\n\n    for (let k of keys) {\n      obj[k] = this[k];\n    }\n\n    return obj;\n  }\n\n  sendMessage() {\n    return this.client.sendMessage.apply(this.client, reg(this, arguments));\n  }\n\n  send() {\n    return this.client.sendMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendTTSMessage() {\n    return this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendTTS() {\n    return this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n  }\n\n  sendFile() {\n    return this.client.sendFile.apply(this.client, reg(this, arguments));\n  }\n\n  startTyping() {\n    return this.client.startTyping.apply(this.client, reg(this, arguments));\n  }\n\n  stopTyping() {\n    return this.client.stopTyping.apply(this.client, reg(this, arguments));\n  }\n\n  getLogs() {\n    return this.client.getChannelLogs.apply(this.client, reg(this, arguments));\n  }\n\n  getMessage() {\n    return this.client.getMessage.apply(this.client, reg(this, arguments));\n  }\n}\n"]}